{
  "framework": "FileIngestion",
  "description": "Full File Ingestion configuration",
  "fields": [
    { "key":"master","label":"Master","type":"text","defaultValue":"yarn","mandatory":true,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"Cluster master","description":null },
    { "key":"appName","label":"App Name","type":"text","defaultValue":"ingestionTestCsv","mandatory":true,"editable":true,"regex":"^[A-Za-z0-9_\\-]+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"Unique for this job","description":null },
    { "key":"fid","label":"Feed ID","type":"text","defaultValue":"gcceappnaltldd","mandatory":true,"editable":true,"regex":"^[A-Za-z0-9_\\-]+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"Feed identifier","description":null },
    { "key":"environment","label":"Environment","type":"dropdown","defaultValue":"DEV","mandatory":true,"editable":true,"regex":null,"options":["DEV","QA","PROD"],"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"Job environment","description":null },
    { "key":"sourceCsi","label":"Source CSI","type":"text","defaultValue":"154346","mandatory":true,"editable":true,"regex":"^[0-9]+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"Source CSI used in archival path creation","description":null },
    { "key":"targetCsi","label":"Target CSI","type":"text","defaultValue":"169912","mandatory":true,"editable":true,"regex":"^[0-9]+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"Target CSI","description":null },
    { "key":"fileFormat","label":"File Format","type":"dropdown","defaultValue":"csv","mandatory":true,"editable":true,"options":["csv","txt","sas"],"regex":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"File extension" },
    { "key":"encoding","label":"Encoding","type":"text","defaultValue":"UTF-8","mandatory":true,"editable":true,"regex":"^[\\w\\-]+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"inputFilePattern","label":"Input File Pattern","type":"text","defaultValue":"test_csv.csv","mandatory":true,"editable":true,"regex":"^.+\\.(csv|txt|sas)$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Use ? and * patterns" },
    { "key":"inputFileLocation","label":"Input File Location","type":"text","defaultValue":"/tmp/ps48300/test","mandatory":false,"editable":true,"regex":"^(\\/.*)+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Optional, if blank uses default location" },
    { "key":"inputHdfsLocation","label":"HDFS Input Location","type":"text","defaultValue":"/data/gcceappnaltldd/work/ps48300/test","mandatory":false,"editable":true,"regex":"^(\\/.*)+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Mandatory if inputFileLocation blank" },
    { "key":"metadataFilePath","label":"Metadata File Path","type":"text","defaultValue":"/tmp/ps48300/test/test_csv.meta","mandatory":false,"editable":true,"regex":"^(\\/.*)+\\.meta$","options":null,"mandatoryIf":{ "key":"header","value":false },"visibleIf":{ "key":"header","value":true },"allowUserAddition":false,"tooltip":null,"description":"Optional, if header=false" },
    { "key":"inputFileColumnDelimiter","label":"Column Delimiter","type":"text","defaultValue":",","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Blank for positional files" },
    { "key":"header","label":"Header","type":"boolean","defaultValue":false,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"True if column names from file header","description":null },
    { "key":"ignoreHeaderLines","label":"Ignore Header Lines","type":"number","defaultValue":0,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Number of header lines to skip" },
    { "key":"ignoreFooterLines","label":"Ignore Footer Lines","type":"number","defaultValue":0,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"ignoreColumns","label":"Ignore Columns","type":"text","defaultValue":"date","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"validateMetadata","label":"Validate Metadata","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"failIfFileEmpty","label":"Fail If File Empty","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"failIfNoFiles","label":"Fail If No Files","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"target","label":"Target","type":"dropdown","defaultValue":"hive","mandatory":true,"editable":true,"options":["hive","snowflake"],"regex":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"useTempTbl","label":"Use Temp Table","type":"boolean","defaultValue":false,"mandatory":true,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Mandatory if useTempTbl true" },
    { "key":"tempHiveDb","label":"Temp Hive DB","type":"text","defaultValue":"gcceappnaltldd_work","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":{"key":"useTempTbl","value":true},"visibleIf":{"key":"useTempTbl","value":true},"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"tempHiveTbl","label":"Temp Hive Table","type":"text","defaultValue":"stg_test","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":{"key":"useTempTbl","value":true},"visibleIf":{"key":"useTempTbl","value":true},"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"dropTempTbl","label":"Drop Temp Table","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"tgtHiveDb","label":"Target Hive DB","type":"text","defaultValue":"gcceappnaltldd_work","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":{"key":"target","value":"hive"},"visibleIf":{"key":"target","value":"hive"},"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"tgtHiveTbl","label":"Target Hive Table","type":"text","defaultValue":"tgt_test","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":{"key":"target","value":"hive"},"visibleIf":{"key":"target","value":"hive"},"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"tgtHdfsDir","label":"Target HDFS Directory","type":"text","defaultValue":"/data/gcceappnaltldd/work/file_ingestion_framework/test_table/","mandatory":false,"editable":true,"regex":"^(\\/.*)+$","options":null,"mandatoryIf":{"key":"target","value":"hive"},"visibleIf":{"key":"target","value":"hive"},"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"tgtSnowflakeDb","label":"Target Snowflake DB","type":"text","defaultValue":"","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":{"key":"target","value":"snowflake"},"visibleIf":{"key":"target","value":"snowflake"},"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"tgtSnowflakeTbl","label":"Target Snowflake Table","type":"text","defaultValue":"","mandatory":true,"editable":true,"regex":null,"options":null,"mandatoryIf":{"key":"target","value":"snowflake"},"visibleIf":{"key":"target","value":"snowflake"},"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"tgtTruncateTbl","label":"Truncate Target Table","type":"boolean","defaultValue":false,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"userDefinedColumns","label":"User-Defined Columns","type":"text","defaultValue":"eap_as_of_dt=SUBSTR(FROM_UNIXTIME(UNIX_TIMESTAMP()),1,10)","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Semi-colon separated" },
    { "key":"hivePartitionColumn","label":"Hive Partition Column","type":"text","defaultValue":"","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"hivePartitionExpression","label":"Partition Expression","type":"text","defaultValue":"eap_custom_partition=SUBSTR(FROM_UNIXTIME(UNIX_TIMESTAMP()),'yyyyMMdd'),1,8)","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"hiveOverwrite","label":"Hive Overwrite","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"hiveBtFileFormat","label":"Hive File Format","type":"dropdown","defaultValue":"parquet","mandatory":false,"editable":true,"options":["parquet","orc","avro"],"regex":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"sfBulkSize","label":"Bulk File Size (MB)","type":"number","defaultValue":256,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":"Use for partitioned output" },
    { "key":"impalaRefresh","label":"Impala Refresh","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"nonDatePartition","label":"Non-Date Partition","type":"boolean","defaultValue":false,"mandatory":true,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"Give true if partition is non date","description":null },
    { "key":"getSuccessMail","label":"Send Success Mail","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"ingestionSuccessEmail","label":"Success Email Recipients","type":"text","defaultValue":"ps48300@citi.com,kx04628@citi.com","mandatory":true,"editable":true,"regex":"^[^@]+@[^@]+(,[^@]+@[^@]+)*$","options":null,"mandatoryIf":{"key":"getSuccessMail","value":true},"visibleIf":{"key":"getSuccessMail","value":true},"allowUserAddition":true,"tooltip":null,"description":null },
    { "key":"ingestionFailureEmail","label":"Failure Email Recipients","type":"text","defaultValue":"ps48300@citi.com","mandatory":true,"editable":true,"regex":"^[^@]+@[^@]+(,[^@]+@[^@]+)*$","options":null,"mandatoryIf":{"key":"getSuccessMail","value":true},"visibleIf":{"key":"getSuccessMail","value":true},"allowUserAddition":true,"tooltip":null,"description":null },
    { "key":"fromAddr","label":"From Email Address","type":"text","defaultValue":"noreply@citi.com","mandatory":true,"editable":true,"regex":"^[^@]+@[^@]+\\.[^@]+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"auditFrameworkConfig","label":"Audit Framework Config","type":"text","defaultValue":"/home/gcceetlnanerd/finf/finf_audit_sample.ini","mandatory":true,"editable":true,"regex":"^(\\/.*)+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"auditEmail","label":"Audit Email Address","type":"text","defaultValue":"","mandatory":true,"editable":true,"regex":"^[^@]+@[^@]+\\.[^@]+$","options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"auditCustomMappingKeys","label":"Audit Custom Mapping Keys","type":"map","defaultValue":{"reconPopulationRuleId":"10012","timelinessRuleId":"10011","expectedArrivalTime":"DATAHUB_FRAMEWORKS_FILE_INGESTION_TEST_JOB","feedId":""},"mandatory":true,"editable":true,"allowUserAddition":true,"tooltip":null,"description":"Mandatory if sending recon population/timeliness events" },
    { "key":"sparkParams","label":"Spark Params","type":"text","defaultValue":"","mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":"E.g., --conf spark.yarn.queue=...","description":null },
    { "key":"sparkReadOptionsMap","label":"Spark Read Options","type":"map","defaultValue":{"mode":"permissive"},"mandatory":true,"editable":true,"allowUserAddition":true,"tooltip":null,"description":"Spark supported options" },
    { "key":"isControlFileNeeded","label":"Control File Needed","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"enableKerbUtil","label":"Enable Kerberos Utility","type":"boolean","defaultValue":false,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"enableIdempotent","label":"Enable Idempotent","type":"boolean","defaultValue":true,"mandatory":false,"editable":true,"regex":null,"options":null,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":false,"tooltip":null,"description":null },
    { "key":"idempotentOptions","label":"Idempotent Options","type":"json","defaultValue":{"idempotentColName":"eap_custom_partition","idempotentColFormat":"yyyyMM","failOnStale":true,"lookBackPeriod":"2"},"mandatory":true,"editable":true,"mandatoryIf":null,"visibleIf":null,"allowUserAddition":true,"regex":null,"options":null,"tooltip":null,"description":"Mandatory if idempotent enabled" }
  ],
  "mapSections": [
    { "key":"columnMapping","label":"Column Mapping","type":"map","defaultValue":{"exampleCol":"exampleValue"},"mandatory":true,"allowUserAddition":true,"tooltip":"Map input to DB columns","description":null },
    { "key":"extraProperties","label":"Extra Properties","type":"map","defaultValue":{},"mandatory":false,"allowUserAddition":true,"tooltip":"Any extra config","description":null }
  ]
}
